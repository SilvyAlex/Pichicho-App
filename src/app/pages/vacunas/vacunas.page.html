<ion-content fullscreen="true" class="onboard-content">
  <div class="viewport">
    <!-- Header -->
    <div class="header-bar">
      <ion-buttons slot="start">
        <ion-back-button defaultHref="/" text="" icon="chevron-back-outline"></ion-back-button>
      </ion-buttons>

      <h1 class="title">Vacunas</h1>

      <ion-buttons slot="end">
        <ion-button class="audio-btn" aria-label="Audio" (click)="speakCard()">
          <ion-icon name="volume-high-outline"></ion-icon>
        </ion-button>
      </ion-buttons>
    </div>

    <!-- Descripción -->
    <div class="dashed-card">
      <p class="hello">🐾 ¡{{petName}} necesita sus vacunas!</p>
      <p class="note">
        Marca cuál fue la vacuna que recibió, la fecha en que se la pusieron y el día de su refuerzo.
      </p>
    </div>

    <div class="section-title">Historial de Vacunación</div>

    <!-- Lista de vacunas -->
    <div *ngFor="let v of vaccineList; let i = index" class="form-dashed">
      <ion-item class="clean" lines="none">
        <ion-label position="stacked">Tipo</ion-label>
        <ion-select
          interface="popover"
          placeholder="Elige la vacuna"
          [(ngModel)]="v.tipo"
          [disabled]="!!v.saved"
          class="field-select">
          <ion-select-option *ngFor="let tipo of vacunas" [value]="tipo">{{ tipo }}</ion-select-option>
        </ion-select>
      </ion-item>

      <div class="row-2">
        <ion-item class="clean" lines="none">
          <ion-label position="stacked">Fecha Vacunación</ion-label>
          <ion-input
            type="date"
            [(ngModel)]="v.fechaVacunacion"
            [disabled]="!!v.saved"
            class="field-input">
          </ion-input>
        </ion-item>

        <ion-item class="clean" lines="none">
          <ion-label position="stacked">Fecha Refuerzo</ion-label>
          <ion-input
            type="date"
            [(ngModel)]="v.fechaRefuerzo"
            [disabled]="!!v.saved"
            class="field-input">
          </ion-input>
        </ion-item>
      </div>

      <!-- Botón guardar (✔️) solo si no está guardado -->
      <div class="save-wrap" *ngIf="!v.saved">
        <ion-button color="success" shape="round" (click)="saveVaccine(v, i)">
          <ion-icon name="checkmark-outline"></ion-icon>
        </ion-button>
      </div>
    </div>

    <!-- Botón flotante + -->
    <button class="fab-add" type="button" aria-label="Agregar vacuna" (click)="addRecord()">
      <ion-icon name="add-outline"></ion-icon>
    </button>
  </div>
</ion-content>
