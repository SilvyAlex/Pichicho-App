<ion-content class="page white" [forceOverscroll]="false" fullscreen>
  <div class="wrap">
    <!-- ===== Espacio superior y título ===== -->
    <div class="hello-space"></div>
    <h1 class="title">Perfil de {{ userName || 'tu mascota' }}</h1>

    <!-- ===== Foto principal de la mascota ===== -->
    <div class="avatar-ring" (click)="openFullImage(petPhoto)">
      <img
        [src]="'assets/images/SiDog.png'"
        class="avatar"
        alt="Foto de mascota"
      />
    </div>

    <div class="pet-level-badge">{{ petName }} 🐾</div>

    <!-- ===== Galería de evidencias ===== -->
    <div class="section-head">
      <div class="section-title">Galería de evidencias</div>
    </div>

    <div class="gallery-grid" *ngIf="allPhotos.length > 0; else emptyGallery">
      <div
        *ngFor="let photo of allPhotos"
        class="photo-card"
        (click)="openFullImage(photo)"
      >
        <img [src]="photo" alt="Evidencia de {{ petName }}" />
      </div>
    </div>

    <ng-template #emptyGallery>
      <p class="no-photos">Aún no tienes evidencias registradas 🐾</p>
    </ng-template>

    <div style="height: 120px"></div>
  </div>

  <!-- ===== Modal de imagen ampliada ===== -->
  <div class="image-modal" *ngIf="selectedImage">
    <img [src]="selectedImage" alt="Imagen ampliada" />
    <ion-icon
      name="close-outline"
      class="close-btn"
      (click)="closeImage()"
    ></ion-icon>
    <ion-icon
      name="download-outline"
      class="download-btn"
      (click)="downloadImage(selectedImage)"
    ></ion-icon>
  </div>

  <!-- ===== Barra inferior ===== -->
  <nav class="bottom-bar">
    <div class="tab" (click)="goTo('/home')">
      <ion-icon name="home-outline"></ion-icon>
      <span>Inicio</span>
    </div>

    <div class="tab" (click)="goTo('/puntos')">
      <ion-icon name="heart-outline"></ion-icon>
      <span>Puntos</span>
    </div>

    <div class="tab active" (click)="goTo('/perfil')">
      <ion-icon name="person-outline"></ion-icon>
      <span>Perfil</span>
    </div>
  </nav>
</ion-content>
