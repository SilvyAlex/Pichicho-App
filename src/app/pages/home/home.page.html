<ion-content class="page white" [forceOverscroll]="false" fullscreen>
  <div class="wrap">

    <!-- Fila de saludo + botÃ³n de audio -->
    <div class="top-row">
      <div class="hello">Hola {{ (profile$ | async)?.nombreNino || '...' }}</div>

      <div class="audio-wrap">
        <ion-button
          class="audio-btn"
          aria-label="Escuchar pantalla"
          (click)="onMainAudio()"
        >
          <ion-icon name="volume-high-outline"></ion-icon>
        </ion-button>
      </div>
    </div>

    <h1 class="title">
      Â¿CÃ³mo estÃ¡ {{ (profile$ | async)?.nombrePerro || 'tu pelusa' }}<br />hoy?
    </h1>

    <!-- Card de estado -->
    <section class="status-card">
      <div class="status-left">
        <div class="row">
          <span
            class="dot"
            [ngClass]="{
              ok: progreso.comida.done === 2,
              warn: progreso.comida.done < 2
            }"
          ></span>
          <span class="label">Comida</span>
          <span class="count">{{ progreso.comida.done }}/{{ progreso.comida.total }}</span>
        </div>
        <div class="row">
          <span
            class="dot"
            [ngClass]="{
              ok: progreso.paseos.done === 2,
              warn: progreso.paseos.done < 2
            }"
          ></span>
          <span class="label">Paseos</span>
          <span class="count">{{ progreso.paseos.done }}/{{ progreso.paseos.total }}</span>
        </div>
        <div class="row">
          <span
            class="dot"
            [ngClass]="{
              ok: progreso.entreno.done === 1,
              warn: progreso.entreno.done < 1
            }"
          ></span>
          <span class="label">Entrenamiento</span>
          <span class="count">{{ progreso.entreno.done }}/{{ progreso.entreno.total }}</span>
        </div>
        <div class="health">
          <span class="heart">â¤</span>
          <span class="muted">Good</span>
          <span class="muted">{{ progreso.score }}%</span>
        </div>

        <!-- ğŸŒŸ Bonus visible -->
        <div class="bonus-line" *ngIf="progreso.bonus > 0">
          <span class="muted">+{{ progreso.bonus }}% por acciones extra ğŸ›ğŸ’‰</span>
        </div>
      </div>

      <div class="pet-circle">ğŸ¶</div>
    </section>

    <!-- Actividades -->
    <div class="section-head">
      <div class="section-title">Actividades</div>
      <ion-icon name="chevron-forward-outline" class="chev"></ion-icon>
    </div>

    <div
      class="pill pill-blue"
      role="button"
      tabindex="0"
      (click)="onPillClick('/comida1', 'Comida')"
    >
      <div class="emoji">ğŸ¦´</div>
      <div class="bonus-text">Comida</div>
      <div class="pill-count">{{ progreso.comida.done }}/{{ progreso.comida.total }}</div>
      <div class="pill-caret">â€º</div>
    </div>

    <div
      class="pill pill-orange"
      role="button"
      tabindex="0"
      (click)="onPillClick('/paseos1', 'Paseos')"
    >
      <div class="emoji">ğŸ¾</div>
      <div class="bonus-text">Paseos</div>
      <div class="pill-count">{{ progreso.paseos.done }}/{{ progreso.paseos.total }}</div>
      <div class="pill-caret">â€º</div>
    </div>

    <div
      class="pill pill-salmon"
      role="button"
      tabindex="0"
      (click)="onPillClick('/entrena1', 'Entrenamientos')"
    >
      <div class="emoji">ğŸ¶</div>
      <div class="bonus-text">Entrenamientos</div>
      <div class="pill-count">{{ progreso.entreno.done }}/{{ progreso.entreno.total }}</div>
      <div class="pill-caret">â€º</div>
    </div>

    <!-- Puntos extras -->
    <div class="section-head top-gap">
      <div class="section-title">Puntos extras</div>
      <ion-icon name="chevron-forward-outline" class="chev"></ion-icon>
    </div>

    <div
      class="bonus bonus-green"
      role="button"
      tabindex="0"
      (click)="onPillClick('/limpieza', 'Limpieza')"
    >
      <div class="left">
        <div class="emoji">ğŸ›</div>
        <div class="bonus-text">Limpieza</div>
      </div>
      <div class="bonus-right">
        <span class="check-dot" *ngIf="progreso.limpieza && progreso.limpieza.done === 1">
          <ion-icon name="checkmark-outline"></ion-icon>
        </span>
        <span class="chev-white">â€º</span>
      </div>
    </div>

    <div
      class="bonus bonus-blue"
      role="button"
      tabindex="0"
      (click)="onPillClick('/vacunas', 'Vacunas')"
    >
      <div class="left">
        <div class="emoji">ğŸ’‰</div>
        <div class="bonus-text">Vacunas</div>
      </div>
      <div class="bonus-right">
        <span class="check-dot" *ngIf="progreso.vacunas && progreso.vacunas.done === 1">
          <ion-icon name="checkmark-outline"></ion-icon>
        </span>
        <span class="chev-white">â€º</span>
      </div>
    </div>

    <div style="height: 120px"></div>
  </div>

  <!-- Barra inferior -->
   <nav class="bottom-bar">
    <a
      class="tab"
      [routerLink]="['/home']"
      routerLinkActive="active"
      [routerLinkActiveOptions]="{ exact: true }"
    >
      <ion-icon name="home-outline"></ion-icon>
      <span>Inicio</span>
    </a>

    <a
      class="tab"
      [routerLink]="['/puntos']"
      routerLinkActive="active"
    >
      <ion-icon name="heart-outline"></ion-icon>
      <span>Puntos</span>
    </a>

    <a
      class="tab"
      [routerLink]="['/perfil']"
      routerLinkActive="active"
    >
      <ion-icon name="person-outline"></ion-icon>
      <span>Perfil</span>
    </a>
  </nav>
</ion-content>
